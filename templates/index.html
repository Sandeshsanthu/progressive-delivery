<!-- Code Generated by Sidekick is for learning and experimentation purposes only. -->
{% extends "base.html" %}
{% block content %}
  <div class="card">
    <h2>Cars for sale</h2>
    <form method="get" action="{{ url_for('index') }}">
      <div class="row">
        <div>
          <label>Search</label>
          <input name="q" value="{{ q }}" placeholder="e.g., Corolla, low mileage, Austin" />
        </div>
        <div>
          <label>Make</label>
          <input name="make" value="{{ make }}" placeholder="e.g., Toyota" />
        </div>
        <div>
          <label>Min year</label>
          <input name="min_year" value="{{ min_year }}" placeholder="e.g., 2018" />
        </div>
        <div>
          <label>Max price (USD)</label>
          <input name="max_price" value="{{ max_price }}" placeholder="e.g., 15000" />
        </div>
      </div>
      <div style="margin-top:10px;">
        <button type="submit">Filter</button>
      </div>
      <p class="muted" style="margin:10px 0 0 0;">Showing up to 50 newest ACTIVE listings.</p>
    </form>
  </div>

  {% for l in listings %}
    <div class="card">
      <div style="display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap;">
        <div>
          <h3 style="margin:0 0 6px 0;">
            <a href="{{ url_for('listing_detail', listing_id=l['id']) }}">{{ l["title"] }}</a>
          </h3>
          <div class="muted">
            {{ l["year"] }} {{ l["make"] }} {{ l["model"] }} • {{ "{:,}".format(l["mileage"]) }} miles • {{ l["location"] }}
          </div>
          <div class="muted" style="margin-top:4px;">Seller: {{ l["seller_name"] }}</div>
        </div>
        <div style="text-align:right; min-width:160px;">
          <div style="font-size:18px; font-weight:bold;">{{ l["price_cents"] | money }}</div>
          <div class="badge active">ACTIVE</div>
        </div>
      </div>
    </div>
  {% else %}
    <div class="card">No listings match your filters.</div>
  {% endfor %}
{% endblock %}

